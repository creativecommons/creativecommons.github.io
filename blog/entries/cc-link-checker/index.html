<!doctype html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="shortcut icon" type="image/x-icon" href="/static/favicon.ico">
<link rel="stylesheet" href="/static/gen/style.css">
<link rel="stylesheet" href="/static/pygments.css">
<meta property="og:site_name" content="Creative Commons" />
<meta property="og:title" content="Combating dead links with CC Link Checker" />



<meta property="og:description" content="Creative Commons provides vast number of public copyright licenses for people who want to enable free distribution of their work. Creative Commons licenses currently covers over 1.6 billion resources. These license files are then translated to multiple different languages and ported for different jurisdictions for international usage. People link to the respective licenses along with their licensed works. These license files are in the form of html files, stored in creativecommons/creativecommons.org repo." />


<meta property="og:url" content="/blog/entries/cc-link-checker/" />
<meta property="og:type" content="article" />


  
  

  
    
  

  
    
    
      
      
      
    
  

  

  <meta property="og:image" content="https://cc-og-image.vercel.app/Combating dead links with CC Link Checker&lt;br&gt;&lt;sm style=&#39;font-size:70px;&#39;&gt;By 
  Bhumij Gupta
&lt;/sm&gt;.png?&amp;md=1&amp;fontFamily=roboto-condensed&amp;fontSize=100px&amp;images=https%3A%2F%2Fcc-vocabulary.netlify.app%2Flogos%2Fproducts%2Fopen_source.svg%23opensource&amp;images=https://secure.gravatar.com/avatar/fa70b9300856e9811ae673918a4351e3?size=300&amp;d=mp" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Combating dead links with CC Link Checker">
<meta name="twitter:description" content="Creative Commons provides vast number of public copyright licenses for people who want to enable free distribution of their work. Creative Commons licenses currently covers over 1.6 billion resources. These license files are then translated to multiple different languages and ported for different jurisdictions for international usage. People link to the respective licenses along with their licensed works. These license files are in the form of html files, stored in creativecommons/creativecommons.org repo.">

<meta name="twitter:site" content="@creativecommons">
<meta name="twitter:creator" content="@creativecommons">
<meta name="monetization" content="$ilp.uphold.com/edR8erBDbRyq">
<script src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"
  integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js"
  integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
<script type="text/javascript" src="/static/gen/script.js"></script>
<script src="https://unpkg.com/@creativecommons/vocabulary@2020.7.2/js/vocabulary.js"></script>
<script>
  const globalHeaderInstance = vocabulary.createGlobalHeader();
</script>
<title>Combating dead links with CC Link Checker â€” Creative Commons Open Source</title>

<body>
  <div class="ga-script">
<div id="ga-script"></div>
<script type="text/javascript">
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-2010376-37', 'auto');
        ga('send', 'pageview');
</script>
</div>

  <!-- Header -->
  <header class="container">
    <nav class="navbar">
      <div class="navbar-brand">
        <a class="has-text-black" href="/">
          <svg
            class="logo margin-top-small"
            xmlns="http://www.w3.org/2000/svg"
            preserveAspectRatio="xMidYMid meet"
            viewBox="0 0 284 46">
            <use href="#opensource"></use>
          </svg>
        </a>
        <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
      </div>
      <div class="navbar-menu">
        <div class="navbar-end">
          <a class="navbar-item  is-active" href="/blog/">
            Blog
          </a>
          <div class="navbar-item has-dropdown is-hoverable">
            <a class="navbar-link is-arrowless " tabindex="0">
              Contribute<i class="icon caret-down"></i></a>
            <div class="navbar-dropdown">
              
                <a class="navbar-item" href="/contributing-code/">Contribution Guidelines</a>
              
                <a class="navbar-item" href="/contributing-code/projects/">Project List</a>
              
                <a class="navbar-item" href="/contributing-code/issue-finder/">Issue Finder</a>
              
                <a class="navbar-item" href="/contributing-code/pr-guidelines/">Pull Request Guidelines</a>
              
                <a class="navbar-item" href="/contributing-code/github-repo-guidelines/">GitHub Repo Guidelines</a>
              
                <a class="navbar-item" href="/contributing-code/repo-labels/">Repository Labels</a>
              
                <a class="navbar-item" href="/contributing-code/javascript-guidelines/">JavaScript Guidelines</a>
              
                <a class="navbar-item" href="/contributing-code/python-guidelines/">Python Guidelines</a>
              
                <a class="navbar-item" href="/contributing-code/translation-guide/">Translation Guide</a>
              
                <a class="navbar-item" href="/contributing-code/usability/">Usability</a>
              
            </div>
          </div>
          <div class="navbar-item has-dropdown is-hoverable">
            <a class="navbar-link is-arrowless " tabindex="0">
              Community<i class="icon caret-down"></i></a>
            <div class="navbar-dropdown is-active">
              
                <a class="navbar-item" href="/community/">Join the Community</a>
              
                <a class="navbar-item" href="/community/community-team/">Community Team</a>
              
                <a class="navbar-item" href="/community/community-team/members/">Community Team Members</a>
              
                <a class="navbar-item" href="/community/community-team/project-roles/">Project Roles</a>
              
                <a class="navbar-item" href="/community/community-team/community-building-roles/">Community Building Roles</a>
              
                <a class="navbar-item" href="/community/write-a-blog-post/">Write a Blog Post</a>
              
                <a class="navbar-item" href="/community/code-of-conduct/">Code of Conduct</a>
              
                <a class="navbar-item" href="/community/code-of-conduct/enforcement/">Code of Conduct Enforcement</a>
              
            </div>
          </div>
          <div class="navbar-item has-dropdown is-hoverable">
            <a class="navbar-link is-arrowless " tabindex="0">
              Internships<i class="icon caret-down"></i></a>
            <div class="navbar-dropdown">
              
                <a class="navbar-item" href="/internships/">Overview</a>
              
                <a class="navbar-item" href="/internships/project-ideas/">Project Ideas</a>
              
                <a class="navbar-item" href="/internships/applicant-guide/">Applicant Guide</a>
              
                <a class="navbar-item" href="/internships/intern-guide/">Intern Guide</a>
              
                <a class="navbar-item" href="/internships/mentor-guide/">Mentor Guide</a>
              
                <a class="navbar-item" href="/internships/history/">History</a>
              
            </div>
          </div>
        </div>
      </div>
    </nav>
  </header>

  <!-- Breadcrumb -->
  
    <div class="breadcrumb-container">
      <nav class="container breadcrumb caption bold" aria-label="breadcrumbs">
        <ul>
          
          
          <!-- Extracting the slugs of URL -->
          
            
              
              
            
          
            
              
              
            
          
            
              
              
            
          
            
              
              
            
          
          
            <!-- Active link -->
            
              <!-- Forming the URL using extracted slugs -->
              
              
              
                
              
              <li><a class="link" href="/">
              
                Home
              
              </a></li>
            
          
            <!-- Active link -->
            
              <!-- Forming the URL using extracted slugs -->
              
              
              
                
              
                
              
              <li><a class="link" href="/blog/">
              
                Blog
              
              </a></li>
            
          
            <!-- Active link -->
            
              <!-- Forming the URL using extracted slugs -->
              
              
              
                
              
                
              
                
              
              <li><a class="link" href="/blog/entries/">
              
                Entries
              
              </a></li>
            
          
            <!-- Active link -->
            
              <li class="is-active"><a aria-current="page displayed">Combating dead links with CC Link Checker</a></li>
            
          
        </ul>
      </nav>
    </div>
  

  <!-- Body -->
  
  <div class="single-post">
    <header class="single-post-header">
      <div class="container">
        <h4>CC Open Source Blog</h4>
        <h2 class="title">Combating dead links with CC Link Checker</h2>
        
        <div class="author columns is-marginless">
          <figure class="image profile">
            <img src="https://secure.gravatar.com/avatar/fa70b9300856e9811ae673918a4351e3?size=200&d=mp" alt="gravatar" class="profile" />
          </figure>
          <p class="column">by <a href="/blog/authors/bhumijgupta/">
  Bhumij Gupta
</a>
          on 2019-07-15</p>
        </div>
        
      </div>
    </header>
    <div class="single-post-body content container">
      <p>Creative Commons provides vast number of public copyright licenses for people who want to enable free distribution of their work. Creative Commons licenses currently covers over <strong>1.6 billion resources</strong>. These license files are then translated to multiple different languages and ported for <a href="https://wiki.creativecommons.org/wiki/CC_Ports_by_Jurisdiction">different jurisdictions</a> for international usage. People link to the respective licenses along with their licensed works. These license files are in the form of <code>html</code> files, stored in <a href="https://github.com/creativecommons/creativecommons.org/tree/master/docroot/legalcode">creativecommons/creativecommons.org</a> repo.</p>
<h3 id="problem-statement">Problem Statement</h3><p>These license files contain links to their deeds, license translated to other languages, internal links, and many more. Sometimes due to errors, these files may contain dead / broken links. These broken links leads to incorrect/ incomplete understanding of the license clauses and permissions by the viewer. This may sometime lead to incorrect usage of the licensed resource.</p>
<p>At the time of writing, the repo contains over <strong>930 files</strong> with an average of <strong>50 links per file</strong>. New translation of license deeds are regularly added to the repo and the existing license deeds are also updated frequently. Manually testing these files would take a lot of time. Considering the future additions of licenses, translations and jurisdiction ports, the time required for manual testing would increase drastically.</p>
<h3 id="solution-cc-link-checker">Solution - CC Link Checker</h3><p><a href="https://github.com/creativecommons/cc-link-checker">CC Link Checker</a> aims to solve the problem by automating the task of checking links in the license and reporting errorneous and broken links. The python script scrapes all the licenses from the repo and checks the status of the links in the files. The script checks the link for <code>40X</code> errors, <code>timeout errors</code> and <code>invalid schema</code> error.</p>
<p>Firstly, let's get the features out of the way. The script uses multiprocessing, taking full use of multiple core processors, has 2 modes of output to CLI - default and verbose, and can also print the error links, summary of the result, and mapping of error links to their URLs of occurence in a file.</p>
<p>Now let's hop in the nerd train and take a deeper look at development journey.</p>
<h3 id="development-journey">Development Journey</h3><p>I started working on the project a month back i.e. 13 Jun. During this journey there were many ups and downs, with some productive and some totally unproductive days. For better understanding, lets look the journey for each week.</p>
<ul>
<li><p>Week 1
  The approach for the first week was to get the basic functionality done. The script was able to scrape and parse all license and links from the github repo using <code>requests</code> and <code>BeautifulSoup</code>. I implemented basic memoization to prevent repeated fetching of already fetched links. This step decreased the execution time of the script by several folds. Parallel to the development of the script, I also had to implement Circle-CI. Since it was my first time using a CI service, it took me quite some time to wrap my head around Circle-CI.</p>
<p><strong>Things I learned:</strong> Circle-CI, pipenv, different docstring formats, different code styles and pep8 recommendations - black and flake8</p>
</li>
<li><p>Week 2
  With the basic functionality completed, now it was time to implement some advance features. This week I worked on implementing <code>--verbose</code> flag a.k.a. the verbose mode of output to CLI. The verbose mode would help in debugging and give a deeper look into how the python script was working. Also I worked on <code>--output-errors</code> flag, which would print error links and summary to a file.</p>
<p>Everything was working fine and ahead of schedule, until a major bug was detected i.e. incorrect conversion of relative to absolute links which resulted in several false positive and false negatives. Fixing this required deducing pattern between the URL on which the license file would be displayed from the license name. This step took a lot of time and pushed project below its schedule.</p>
<p><strong>Things I learned:</strong> Argument parser and help text</p>
</li>
<li><p>Week 3
  The output file consisted only file name and the errorneous links encountered in the file. As per suggestion of <a href="https://creativecommons.org/author/kgodey">Kriti Godey</a>, I worked on adding the summary section to the file which would include information like total error links, number of unique links along with errorneous link and the page URLs on which it is present (since many page consist the same dead link). The next step was optimizing time taken to run the script.</p>
<p>Before any optimisation the script took 4+ minutes to run on cloud servers. To reduce the time, I started working on implementing <strong>multithreading</strong> to reduce the execution time of the script. Implementing multithreading was a big task as it required major refactoring of the code to make it thread safe and compatible with concurrency. After sucessfully refactoring and implementing multithreading, I was able to bring down the execution time to around 3:20.</p>
<p>As pointed out by my mentor, this came with its own set of problems. Due to python's <code>Global Interpretor Lock(GIL)</code> no two threads can run parallely inside the python interpretor and the use of global and lock made the code more complex. Also, the performance increase was not significant. This was a setback as my week long efforts had gone in vain.</p>
<p><strong>Things I learned:</strong> Multithreading, locks</p>
</li>
<li><p>Week 4
  To aid the situation my mentors suggested using <strong>multiprocessing</strong> instead. I had no former experience with multiprocessing, but thanks to python's beautiful documentations and examples, I was quickly able to get a hold of it. I finished implementing multiprocessing and to my surprise, there was <strong>49.5% performance increase</strong>. The script now only took 2:27 to complete.</p>
<p>The major functionality of the script were completed, and the optimisations were done. To improve the code quality and improve documentation, it was time to write <strong>unit tests</strong> for the script. To write the tests I used <code>pytests</code> framework which provides several benefits and higher level abstraction over the inbuilt <code>unittest</code> module.</p>
<p><strong>Things I learned:</strong> Multiprocessing, pytests</p>
</li>
</ul>
<h3 id="future-work">Future work</h3><ul>
<li>Optimising the script for more performace increase</li>
<li>Making the script more CI-friendly</li>
</ul>
<p>CC Link Checker is only possible due to the support and guidance of my mentors <a href="https://creativecommons.org/author/aldenpage">Alden Page</a> and <a href="https://creativecommons.org/author/TimidRobot">Timid Robot Zehta</a>, who have been very supportive on every step of the project. Also I would like to thank engineering director <a href="https://creativecommons.org/author/kgodey">Kriti Godey</a> for her continuous support.</p>
<p>You can follow the project on Github: <a href="https://github.com/creativecommons/cc-link-checker">creativecommons/cc-link-checker</a>. You can also join the discussion on <code>#cc-link-checker</code> on <a href="https://opensource.creativecommons.org/community/#slack">Slack</a></p>
<p>The project is approaching its completion. Can't wait to see it in production.</p>
<p><em>Signing off<br>
Bhumij Gupta</em></p>

    </div>
    <footer class="single-post-footer container">
      <div class="category">
        <h4 class="category-title">Categories</h4>
        <div class="categories">
          
            
              
              
              <a class="button tag" href=" /blog/categories/open-source/ ">open-source</a>
            
              
              
              <a class="button tag" href=" /blog/categories/product/ ">product</a>
            
              
              
              <a class="button tag" href=" /blog/categories/cc-link-checker/ ">cc-link-checker</a>
            
          
        </div>
      </div>
      
      <div class="comments">
<div id="disqus_thread"></div>
<script>
  var disqus_config = function() { this.page.identifier = "/blog/entries/cc-link-checker"; this.page.url = "http://opensource.creativecommons.org/blog/entries/cc-link-checker/"; };
  (function() {
    var d = document, s = d.createElement('script');
    s.src = '//cc-open-source.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>
  Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript"
    rel="nofollow">comments powered by Disqus.</a>
</noscript>
</div>
    </footer>
  </div>


  <!-- Footer -->
  <footer class="main-footer">
    <div class="container">
      <div class="columns">
        <div class="column is-one-quarter">
          <a href="https://creativecommons.org" class="main-logo margin-bottom-bigger">
            <span class="has-text-white">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                preserveAspectRatio="xMidYMid meet"
                viewBox="0 0 304 73">
                <use href="#logomark"></use>
              </svg>
            </span>
          </a>
          <div>
            <address class="margin-bottom-normal">Creative Commons<br />PO Box 1866, Mountain View CA 94042</address>
            <a href="mailto:info@creativecommons.org" class="mail">info@creativecommons.org</a><br />
            <a href="tel://+1-415-429-6753" class="phone">+1-415-429-6753</a>
          </div>
          <div class="margin-vertical-large">
            <a href="https://www.instagram.com/creativecommons" class="social has-text-white" target="_blank"
              rel="noopener">
              <i class="icon margin-right-small is-size-4">instagram</i>
            </a>
            <a href="https://www.twitter.com/creativecommons" class="social has-text-white" target="_blank"
              rel="noopener">
              <i class="icon margin-right-small is-size-4">twitter</i>
            </a>
            <a href="https://www.facebook.com/creativecommons" class="social has-text-white" target="_blank"
              rel="noopener">
              <i class="icon margin-right-small is-size-4">facebook</i>
            </a>
            <a href="https://www.linkedin.com/company/creative-commons/" class="social has-text-white" target="_blank"
              rel="noopener">
              <i class="icon margin-right-small is-size-4">linkedin</i>
            </a>
          </div>
        </div>
        <div class="column is-three-quarters">
          <div class="columns">
            <div class="column is-full">
              <nav class="footer-navigation">
                <ul class="menu">
                  <li>
                    <a href="/blog/" class="menu-item">Blog</a>
                  </li>
                  <li>
                    <a href="/community/community-team/" class="menu-item">Community Team</a>
                  </li>
                  <li>
                    <a href="/contributing-code/projects/" class="menu-item">Project List</a>
                  </li>
                  <li>
                    <a href="/archives/" class="menu-item">Archives</a>
                  </li>
                </ul>
              </nav>
            </div>
          </div>
          <div class="columns">
            <div class="column is-two-thirds">
              <div class="subscription">
                <h5 class="b-header">Subscribe to our newsletter</h5>
                <form class="newsletter">
                  <input type="text" class="input" placeholder="Your email">
                  <input type="submit" value="subscribe" class="button small">
                </form>
              </div>
              <div class="attribution margin-top-bigger">
                <p class="caption">
                  Except where otherwise
                  <a href="https://creativecommons.org/policies#license" target="_blank" rel="noopener">noted</a>,
                  content on this site is licensed under a
                  <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank" rel="noopener">Creative Commons
                    Attribution 4.0 International license</a>.
                  <a href="https://creativecommons.org/website-icons" target="_blank" rel="noopener">Icons</a>
                  by
                  <a href="https://fontawesome.com/" target="_blank" rel="noopener">Font Awesome</a>.
                </p>
                <div class="margin-top-smaller">
                  <i class="icon margin-right-small is-size-4">cclogo</i>
                  <i class="icon margin-right-small is-size-4">ccby</i>
                </div>
              </div>
            </div>
            <div class="column is-one-third">
              <aside class="donate-section">
                <h5>Our work relies on you!</h5>
                <p>Help us keep the internet free and open.</p>
                <a class="button small donate" href="https://creativecommons.org/donate?c_src=website&c_src2=GlobalFooter">
                  <i class="icon cc-letterheart-filled margin-right-small is-size-5 padding-top-smaller"></i>
                  Donate now
                </a>
              </aside>
            </div>
          </div>
        </div>
      </div>
    </div>
  </footer>
</body>
