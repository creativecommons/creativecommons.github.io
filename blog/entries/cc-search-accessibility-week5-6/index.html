<!doctype html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="shortcut icon" type="image/x-icon" href="/static/favicon.ico">
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700" rel="stylesheet">
<link rel="stylesheet" href="/static/gen/style.css">
<link rel="stylesheet" href="/static/pygments.css">
<meta property="og:site_name" content="Creative Commons" />
<meta property="og:title" content="Internationalization continued: Modifying tests" />



<meta property="og:description" content="These are the fifth and sixth weeks of my internship with CC. I am working on improving the accessibility of cc-search and internationalizing it as well.
This post contains yet another important aspect to be taken care of while internationalizing the Vue components, i.e. modifying tests to include the changes." />


<meta property="og:url" content="/blog/entries/cc-search-accessibility-week5-6/" />
<meta property="og:type" content="article" />

      
<meta property="og:image" content="http://opensource.creativecommons.org/blog/entries/cc-search-accessibility-week5-6/final.png" />
      
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Internationalization continued: Modifying tests">
<meta name="twitter:description" content="These are the fifth and sixth weeks of my internship with CC. I am working on improving the accessibility of cc-search and internationalizing it as well.
This post contains yet another important aspect to be taken care of while internationalizing the Vue components, i.e. modifying tests to include the changes.">
      
<meta name="twitter:image" content="http://opensource.creativecommons.org/blog/entries/cc-search-accessibility-week5-6/final.png">
      
<meta name="twitter:site" content="@creativecommons">
<meta name="twitter:creator" content="@creativecommons">
<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
<script type="text/javascript" src="/static/gen/script.js"></script>
<title>Internationalization continued: Modifying tests — Creative Commons on GitHub</title>
<body>
  <a href="https://github.com/creativecommons/creativecommons.github.io-source" target="_blank" class="github-corner" aria-label="View source on GitHub">
    <svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; left: 0; transform: scale(-1, 1);" aria-hidden="true">
      <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
    </svg>
  </a>
  <div class="ga-script">
<div id="ga-script"></div>
<script type="text/javascript">
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-2010376-37', 'auto');
        ga('send', 'pageview');
</script>
</div>
  <header class="main-header">
    <div class="container-fluid">
      <div class="row justify-content-md-center">
        <div class="col-lg-9 col-md-9 col-sm-12">
          <nav class="navbar navbar-expand-xl navbar-dark">
            
            <a class="navbar-brand" href="/">
              <img src="/cclogo.svg">
              <span class="legend">Creative Commons Open Source</span>
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
              aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarSupportedContent">
              <ul class="navbar-nav">
                <li class="nav-item active">
                  <a class="nav-link" href="/blog/">Blog</a>
                </li>
                <li class="nav-item dropdown ">
                  <a class="nav-link" href="#" id="navbarContributingCodeDropdown" role="button">Contribute</a>
                  <div class="dropdown-menu" aria-labelledby="navbarContributingCodeDropdown">
                    
                      <a class="dropdown-item" href="/contributing-code/">Contribution Guidelines</a>
                    
                      <a class="dropdown-item" href="/contributing-code/projects/">Project List</a>
                    
                      <a class="dropdown-item" href="/contributing-code/pr-guidelines/">Pull Request Guidelines</a>
                    
                      <a class="dropdown-item" href="/contributing-code/github-repo-guidelines/">GitHub Repo Guidelines</a>
                    
                      <a class="dropdown-item" href="/contributing-code/cc-search/">CC Search</a>
                    
                      <a class="dropdown-item" href="/contributing-code/usability/">Usability</a>
                    
                  </div>
                </li>
                <li class="nav-item dropdown ">
                  <a class="nav-link" href="#" id="navbarCommunityDropdown" role="button">Community</a>
                  <div class="dropdown-menu" aria-labelledby="navbarCommunityDropdown">
                    
                      <a class="dropdown-item" href="/community/">Join the Community</a>
                    
                      <a class="dropdown-item" href="/community/community-team/">Community Team</a>
                    
                      <a class="dropdown-item" href="/community/community-team/members/">Community Team Members</a>
                    
                      <a class="dropdown-item" href="/community/community-team/project-roles/">Project Roles</a>
                    
                      <a class="dropdown-item" href="/community/community-team/community-building-roles/">Community Building Roles</a>
                    
                      <a class="dropdown-item" href="/community/write-a-blog-post/">Write a Blog Post</a>
                    
                      <a class="dropdown-item" href="/community/code-of-conduct/">Code of Conduct</a>
                    
                      <a class="dropdown-item" href="/community/code-of-conduct/enforcement/">Code of Conduct Enforcement</a>
                    
                  </div>
                </li>
                <li class="nav-item dropdown ">
                  <a class="nav-link" href="#" id="navbarInternshipsDropdown" role="button">Internships</a>
                  <div class="dropdown-menu" aria-labelledby="navbarInternshipsDropdown">
                    
                      <a class="dropdown-item" href="/internships/">Overview</a>
                    
                      <a class="dropdown-item" href="/internships/project-ideas/">Project Ideas</a>
                    
                      <a class="dropdown-item" href="/internships/applicant-guide/">Applicant Guide</a>
                    
                      <a class="dropdown-item" href="/internships/intern-guide/">Intern Guide</a>
                    
                      <a class="dropdown-item" href="/internships/mentor-guide/">Mentor Guide</a>
                    
                      <a class="dropdown-item" href="/internships/history/">History</a>
                    
                  </div>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="/cc-search/">CC Search</a>
                </li>
                <li class="nav-item dropdown ">
                  <a class="nav-link" href="#" id="navbarArchivesDropdown" role="button">Archives</a>
                  <div class="dropdown-menu" aria-labelledby="navbarArchivesDropdown">
                    
                      <a class="dropdown-item" href="/archives/old-tech-blog">CC Tech Blog (2007-2014)</a>
                    
                      <a class="dropdown-item" href="https://lists.ibiblio.org/pipermail/cc-devel/">cc-devel mailing list (2005-2015)</a>
                    
                  </div>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="https://creativecommons.org" target="_blank">creativecommons.org</a>
                </li>
              </ul>
            </div>
          </nav>
      </div>
    </div>
  </header>
  <div class="container-fluid page-content">
    <div class="row justify-content-md-center">
      <div class="col-lg-9 col-md-9 col-sm-12 content-wrap">
        <div class="page py-3">
          <h1 class="page-title pb-3 mb-4">CC Open Source Blog</h1>
          
  <h2 class="mb-0">Internationalization continued: Modifying tests</h2>
  
  <p class="meta text-muted mt-0 mb-2">by <a href="/blog/authors/AyanChoudhary/">
  Ayan Choudhary
</a>
  on Friday, 2020-07-10</p>
    
   
  <div class="card bg-light mb-2">
    <div class="card-body p-2">
    <p class="meta my-0"><span class="mr-2"><strong>This blog is part of the series:</strong></span>
       <a href="#series">GSoC 2020: CC Search</a>
    </p>
    </div>
  </div>
 
  <div class="body"><p>These are the fifth and sixth weeks of my internship with CC. I am working on improving the accessibility of cc-search and internationalizing it as well.
This post contains yet another important aspect to be taken care of while internationalizing the Vue components, i.e. modifying tests to include the changes.</p>
<p>The components which were left are the two pages displaying the most content:</p>
<ol>
<li><a href="https://github.com/creativecommons/cccatalog-frontend/blob/develop/src/pages/BrowsePage.vue">Browse page</a></li>
<li><a href="https://github.com/creativecommons/cccatalog-frontend/blob/develop/src/pages/PhotoDetailPage.vue">ImageDetail page</a></li>
</ol>
<p>The above two pages too were handled similar to the remaining pages, special care had to be taken in case of ImageDetail page since there are too many components in different files.
By this point we also have our json structure figured out, mostly and are ready to push the json for fetching further translations.</p>
<p>Now let's look at the modifications required in the tests. We generally use <code>$t</code> to access strings from the locales json, but this method/custom-component is not present in the testing vue instance, so we had to inject this method usin localVue and a custom i18n instance.</p>
<pre><code>const localVue = createLocalVue();
localVue.use(Vuex);
localVue.use(VueI18n);
const messages = require('@/locales/en.json');

const i18n = new VueI18n({
  locale: 'en',
  fallbackLocale: 'en',
  messages,
});
</code></pre>
<p>Now we inject this 18n component into our vue instance and we have access to our <code>$t</code>, but there is still one more step left.
We still need to mock its functionality in the tests. So we create a mock <code>$t</code> instance to mock in our component. The final code is given below:</p>
<pre><code>const $t = (key) =&gt; i18n.messages[key];

options = {
    mocks: {
        $t,
    },
};
</code></pre>
<p>Now we are ready to render our component using these custom options with mocks for testing.</p>
<p>And <em>drum rolls</em> we have successfully completed Internationalization of the complete cc search. Below are the images for some of the completed pages:</p>
<p><img src="/blog/entries/cc-search-accessibility-week5-6/final.png" alt="final.png"></p>
<p><img src="/blog/entries/cc-search-accessibility-week5-6/finalAbout.png" alt="finalAbout.png"></p>
<p><img src="/blog/entries/cc-search-accessibility-week5-6/finalImageDetail.png" alt="finalImageDetail.png"></p>
<p>The issues closed with the completion of Internationalization are:</p>
<ol>
<li><a href="https://github.com/creativecommons/cccatalog-frontend/issues/487">[META] Internationalisation (i18n) Setup</a></li>
<li><a href="https://github.com/creativecommons/cccatalog-frontend/issues/941">Set up vue-i18n infrastructure</a></li>
<li><a href="https://github.com/creativecommons/cccatalog-frontend/issues/942">Create locale messages format JSON structure</a></li>
<li><a href="https://github.com/creativecommons/cccatalog-frontend/issues/943">Allow users to change locale on the client</a></li>
</ol>
<p>You can track the work done for these weeks through this PR:</p>
<ol>
<li><a href="https://github.com/creativecommons/cccatalog-frontend/pull/1040">Localize browsepage and single-result page</a></li>
</ol>
<p>The progress of the project can be tracked on <a href="https://github.com/creativecommons/cccatalog-frontend">cc-search</a></p>
<p>CC Search Accessiblity is my GSoC 2020 project under the guidance of <a href="https://creativecommons.org/author/zackcreativecommons-org/">Zack Krida</a> and <a href="https://opensource.creativecommons.org/blog/authors/akmadian/">Ari Madian</a>, who is the primary mentor for this project, <a href="https://creativecommons.org/author/annacreativecommons-org/">Anna Tumadóttir</a> for helping all along and engineering director <a href="https://creativecommons.org/author/kriticreativecommons-org/">Kriti
Godey</a>, have been very supportive.</p>
</div>
  
  <div class="mt-3 bg-light" id="series">
    <hr/>
    <h5 class="font-weight-bold">Posts in the <em>GSoC 2020: CC Search</em> series</h5>
    <ul class="toc list-unstyled">
      
        <li>
        
          <a href="/blog/entries/cc-search-accessibility-and-internationalization/">CC Search, Proposal Drafting and Community Bonding</a>
        
        </li>
      
        <li>
        
          <a href="/blog/entries/cc-search-accessibility-week1-2/">CC Search, Setting up vue-i18n and internationalizing homepage</a>
        
        </li>
      
        <li>
        
          <a href="/blog/entries/cc-search-accessibility-week3-4/">Internationalization Continued: Handling strings in the store</a>
        
        </li>
      
        <li>
        
          <strong>Internationalization continued: Modifying tests</strong>
        
        </li>
      
        <li>
        
          <a href="/blog/entries/cc-search-accessibility-week7-8/">CC Search, Initial Accessibility Improvements</a>
        
        </li>
      
    </ul>
    <hr/>
  </div>
  
  <div class="card bg-light">
    <div class="card-body p-2">
      <p class="meta my-0"><span class="mr-2"><strong>Categories:</strong></span>
        
          
            
            
            <a href=" /blog/categories/cc-search/ ">cc-search</a>,
          
            
            
            <a href=" /blog/categories/community/ ">community</a>,
          
            
            
            <a href=" /blog/categories/gsoc/ ">gsoc</a>,
          
            
            
            <a href=" /blog/categories/open-source/ ">open-source</a>
          
        
      </p>
    </div>
  </div>

  <div class="comments">
<div id="disqus_thread"></div>
<script>
  var disqus_config = function() { this.page.identifier = "/blog/entries/cc-search-accessibility-week5-6"; this.page.url = "http://opensource.creativecommons.org/blog/entries/cc-search-accessibility-week5-6/"; };
  (function() {
    var d = document, s = d.createElement('script');
    s.src = '//cc-open-source.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>
  Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript"
    rel="nofollow">comments powered by Disqus.</a>
</noscript>
</div>

          <a id="back-to-top" href="#top" class="btn btn-dark btn-sm" role="button">Back to top</a>
        </div>
      </div>
    </div>
  </div>
  <footer class="main-footer bg-dark">
    <div class="container-fluid">
      <div class="row justify-content-md-center">
        <div class="col-lg-9 col-md-9 col-sm-12 footer text-light py-4 px-3">
          <small>
            <p><a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License"
                  style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a></p>
            <p class="text-muted">All the content on this website is licensed under a <strong><a rel="license"
                  href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International
                  License</a></strong> unless otherwise specified.</p>
          </small>
        </div>
      </div>
    </div>
  </footer>
</body>
